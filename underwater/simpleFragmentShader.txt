#version 330 core

in vec3 LightIntensity;
in vec2 Texcoord;

out vec4 fragColor;

uniform sampler2D objectTexture;
uniform vec3 diffuseColor; // New uniform for the diffuse color
uniform vec3 ambientLight = vec3(0.2, 0.3, 0.4); // Soft blue-green ambient light for underwater effect


void main() {
    vec4 textureColor = texture(objectTexture, Texcoord);
    
    // Use texture color if available; otherwise, use diffuseColor
    vec3 baseColor = diffuseColor * textureColor.rgb; // Combine diffuse and texture color

    // Add ambient light to LightIntensity
    vec3 finalColor = (LightIntensity + ambientLight) * baseColor;
    fragColor = vec4(finalColor, textureColor.a > 0.0 ? textureColor.a : 1.0);
}
