#version 330 core

in vec3 LightIntensity;
in vec2 Texcoord;

out vec4 fragColor;

uniform sampler2D objectTexture;
uniform vec3 diffuseColor; // New uniform for the diffuse color

void main() {
    vec4 textureColor = texture(objectTexture, Texcoord);
    
    // Use texture color if available; otherwise, use diffuseColor
    vec3 baseColor = textureColor.a > 0.0 ? textureColor.rgb : diffuseColor;

    vec3 finalColor = LightIntensity * baseColor;
    fragColor = vec4(finalColor, textureColor.a > 0.0 ? textureColor.a : 1.0);
}
